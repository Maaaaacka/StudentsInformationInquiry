<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学生信息查询系统</title>
    <!-- Tailwind CSS v3 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.mengze.vip/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- 统一的 Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {主题: {
                extend: {扩展: {
                    colors: {颜色: {
                        primary: '#0071e3',主要: '#0071e3',
                        secondary: '#f5f5f7',次要: '#f5f5f7',
                        textPrimary: '#1d1d1f',文本主要: '#1d1d1f'‘#1d1d1f’,#1d1d1f
                        textSecondary: '#86868b'‘#86868b’,文本次要: '#86868b',b’文本次要: '#86868b',文本次要:'#86868b'‘#86868b’,文本次要: '#86868b',b’文本次要: '#86868b',b’文本次要: '#86868b',b’文本次要: '#86868b',
                        borderColor: '#d2d2d7'
                    },
                    fontFamily: {
                        sans: ['SF Pro Display', 'Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1)','卡片': '0 4px 6px rgba(0, 0, 0, 0.05), 0 1px 3px rgba(0, 0, 0, 0.1)',
                        'card-hover': '0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05)','卡片悬停': '0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script></脚本>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-balance {
                text-wrap: balance;
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
            .glass-effect {
                background: rgba(255, 255, 255, 0.7);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }
        }
        
        /* 自定义滚动条 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        /* 卡片展开动画 */
        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .card-expanded .card-content {
            max-height: 500px;
            transition: max-height 0.5s ease-in;
        }
        
        .rotate-icon {
            transition: transform 0.3s ease;
        }
        
        .card-expanded .rotate-icon {
            transform: rotate(180deg);
        }
        
        /* 搜索框动画 */
        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(0, 113, 227, 0.3);
        }
        
        /* 页面过渡动画 */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 骨架屏动画 */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
    </style>
</head>
<body class="bg-secondary min-h-screen font-sans text-textPrimary">
    <!-- 页面容器 -->
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- 头部 -->
        <header class="text-center mb-12 fade-in">
            <h1 class="text-4xl font-semibold mb-2 text-textPrimary">学生信息查询系统</h1>
            <p class="text-textSecondary text-lg">浙江工贸技师学院计算机网络专业</p>
        </header>
        
        <!-- 搜索区域 -->
        <div class="max-w-2xl mx-auto mb-12 fade-in" style="animation-delay: 0.1s">
            <div class="relative">
                <input type="text" id="search-input" placeholder="输入姓名、学号或证件号码搜索..." 
                    class="search-input w-full py-4 px-5 pr-12 rounded-xl border border-borderColor focus:outline-none focus:border-primary transition-all-300 text-lg">
                <button id="search-button" class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-primary text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-90 transition-all-300">
                    <i class="fa fa-search"></i>
                </button>
            </div>
            <div class="mt-3 text-center text-textSecondary text-sm" id="search-hint">
                共 <span id="total-count">49</span> 名学生，支持模糊搜索
            </div>
        </div>
        
        <!-- 结果区域 -->
        <div id="results-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- 搜索结果将在这里动态生成 -->
            <div class="col-span-full text-center py-12 text-textSecondary" id="empty-state">
                <i class="fa fa-search text-5xl mb-4 opacity-50"></i>
                <p class="text-xl">输入关键词并点击搜索按钮</p>
            </div>
        </div>
    </div>
    
    <!-- 卡片模板 -->
    <template id="student-card-template">
        <div class="student-card bg-white rounded-xl shadow-card hover:shadow-card-hover transition-all-300 overflow-hidden">
            <div class="p-6 cursor-pointer card-header flex justify-between items-start" onclick="toggleCard(this.parentElement)">
                <div class="flex items-start gap-4">
                    <div class="w-20 h-20 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100">
                        <img class="student-photo w-full h-full object-cover" src="" alt="学生照片">
                    </div>
                    <div>
                        <h3 class="student-name text-xl font-semibold mb-1"></h3>
                        <p class="student-id text-textSecondary text-sm mb-1"></p>
                        <p class="student-class text-textSecondary text-sm"></p>
                    </div>
                </div>
                <div class="rotate-icon text-textSecondary">
                    <i class="fa fa-chevron-down"></i>
                </div>
            </div>
            <div class="card-content border-t border-borderColor pt-0">
                <div class="p-6 pt-4">
                    <div class="grid grid-cols-2 gap-x-6 gap-y-3 text-sm">
                        <div class="info-item">
                            <span class="text-textSecondary">证件号码:</span>
                            <span class="student-id-number ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">出生日期:</span>
                            <span class="student-birthdate ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">年龄:</span>
                            <span class="student-age ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">性别:</span>
                            <span class="student-gender ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">民族:</span>
                            <span class="student-nationality ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">所学专业:</span>
                            <span class="student-major ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">班级:</span>
                            <span class="student-class-detail ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">学号:</span>
                            <span class="student-student-id ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">学制:</span>
                            <span class="student-education-system ml-1"></span>
                        </div>
                        <div class="info-item">
                            <span class="text-textSecondary">入学时间:</span>
                            <span class="student-enrollment-date ml-1"></span>
                        </div>
                        <div class="info-item col-span-2">
                            <span class="text-textSecondary">学籍编号:</span>
                            <span class="student-registration-number ml-1"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <!-- 骨架屏模板 -->
    <template id="skeleton-template">
        <div class="bg-white rounded-xl shadow-card p-6">
            <div class="flex items-start gap-4">
                <div class="w-20 h-20 rounded-lg skeleton"></div>
                <div class="flex-1">
                    <div class="h-6 skeleton rounded w-1/3 mb-2"></div>
                    <div class="h-4 skeleton rounded w-1/2 mb-2"></div>
                    <div class="h-4 skeleton rounded w-1/4"></div>
                </div>
            </div>
            <div class="mt-6 space-y-3">
                <div class="h-4 skeleton rounded w-full"></div>
                <div class="h-4 skeleton rounded w-5/6"></div>
                <div class="h-4 skeleton rounded w-4/6"></div>
            </div>
        </div>
    </template>

    <script>
        // 学生数据 - 现在从JSON文件加载
        let students = [];

        // 本地图片路径格式：img/姓名_证件号码.jpg

        // 从JSON文件加载学生数据
        async function loadStudentsData() {
            try {
                const response = await fetch('students.json');
                if (!response.ok) {
                    throw new Error('无法加载学生数据');
                }
                students = await response.json();
                totalCountElement.textContent = students.length;
            } catch (error) {
                console.error('加载学生数据失败:', error);
                showEmptyState('无法加载学生数据，请刷新页面重试');
            }
        }

        // DOM 元素
        const searchInput = document.getElementById('search-input');
        const searchButton = document.getElementById('search-button');
        const resultsContainer = document.getElementById('results-container');
        const emptyState = document.getElementById('empty-state');
        const totalCountElement = document.getElementById('total-count');
        const studentCardTemplate = document.getElementById('student-card-template');
        const skeletonTemplate = document.getElementById('skeleton-template');

        // 初始化
        document.addEventListener('DOMContentLoaded', async () => {
            // 先加载学生数据
            await loadStudentsData();
            
            // 绑定搜索事件
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });
        });

        // 执行搜索
        function performSearch() {
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            // 如果搜索词为空，显示提示
            if (!searchTerm) {
                showEmptyState('请输入搜索关键词');
                return;
            }
            
            // 显示骨架屏
            showSkeletons(3);
            
            // 模拟搜索延迟
            setTimeout(() => {
                // 过滤学生数据
                const filteredStudents = students.filter(student => 
                    student.姓名.toLowerCase().includes(searchTerm) || 
                    student.学号.toLowerCase().includes(searchTerm) || 
                    student.证件号码.toLowerCase().includes(searchTerm) ||
                    student.班级.toLowerCase().includes(searchTerm) ||
                    student.学籍编号.toLowerCase().includes(searchTerm)
                );
                
                // 清空结果容器
                resultsContainer.innerHTML = '';
                
                // 显示结果
                if (filteredStudents.length > 0) {
                    filteredStudents.forEach((student, index) => {
                        const card = createStudentCard(student, index);
                        resultsContainer.appendChild(card);
                    });
                } else {
                    showEmptyState('未找到匹配的学生信息');
                }
            }, 500);
        }

        // 创建学生卡片
        function createStudentCard(student, index) {
            const card = document.importNode(studentCardTemplate.content, true).firstElementChild;
            
            // 计算年龄
            const birthDate = new Date(student.出生日期);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            // 设置卡片内容
            card.querySelector('.student-name').textContent = student.姓名;
            card.querySelector('.student-id').textContent = `学号: ${student.学号}`;
            card.querySelector('.student-class').textContent = `班级: ${student.班级}`;
            card.querySelector('.student-id-number').textContent = student.证件号码;
            card.querySelector('.student-birthdate').textContent = student.出生日期;
            card.querySelector('.student-age').textContent = `${age}岁`;
            card.querySelector('.student-gender').textContent = student.性别;
            card.querySelector('.student-nationality').textContent = student.民族;
            card.querySelector('.student-major').textContent = student.所学专业;
            card.querySelector('.student-class-detail').textContent = student.班级;
            card.querySelector('.student-student-id').textContent = student.学号;
            card.querySelector('.student-education-system').textContent = student.学制;
            card.querySelector('.student-enrollment-date').textContent = student.入学时间;
            card.querySelector('.student-registration-number').textContent = student.学籍编号;
            
            // 设置头像 - 使用本地img文件夹中的图片
            const photoElement = card.querySelector('.student-photo');
            // 图片路径格式：img/姓名_证件号码.jpg
            const photoPath = `img/${student.姓名}_${student.证件号码}.jpg`;
            photoElement.src = photoPath;
            photoElement.alt = `${student.姓名}的照片`;
            
            // 当图片加载失败时显示默认头像
            photoElement.onerror = function() {
                this.src = 'img/default_avatar.jpg';
            };
            
            // 添加淡入动画
            card.classList.add('fade-in');
            
            return card;
        }

        // 显示骨架屏
        function showSkeletons(count) {
            resultsContainer.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const skeleton = document.importNode(skeletonTemplate.content, true);
                resultsContainer.appendChild(skeleton);
            }
        }

        // 显示空状态
        function showEmptyState(message) {
            resultsContainer.innerHTML = '';
            const emptyStateClone = document.importNode(emptyState.content, true) || emptyState.cloneNode(true);
            emptyStateClone.querySelector('p').textContent = message;
            resultsContainer.appendChild(emptyStateClone);
        }

        // 切换卡片展开/折叠状态
        function toggleCard(card) {
            card.classList.toggle('card-expanded');
        }
    </script>
</body>
</html>
